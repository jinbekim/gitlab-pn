{"version":3,"sources":["../src/domain/pn/index.ts","../src/utils/chrome/index.ts"],"sourcesContent":["export type PnRule = \"p1\" | \"p2\" | \"p3\";\nexport type PnRuleSub = \"P1\" | \"P2\" | \"P3\";\nexport type PnBgColorKey = `${PnRule}-bg-color`;\nexport type PnTextColorKey = `${PnRule}-text-color`;\n\nexport type PnRuleMap = {\n  [key in PnRule]: string;\n};\nexport type PnRuleColorMap = {\n  [key in PnBgColorKey | PnTextColorKey]?: string;\n};\nexport type PnRuleMapWithColor = PnRuleMap & PnRuleColorMap;\n\nexport function getBgColorKey(pn: PnRule | PnRuleSub): PnBgColorKey {\n  return `${pn}-bg-color`.toLocaleLowerCase() as PnBgColorKey;\n}\n\nexport function getTextColorKey(pn: PnRule | PnRuleSub): PnTextColorKey {\n  return `${pn}-text-color`.toLocaleLowerCase() as PnTextColorKey;\n}\n\nexport function getReplacementKey(pn: PnRule | PnRuleSub): PnRule {\n  return pn.toLocaleLowerCase() as PnRule;\n}\n\nfunction pnRegexp() {\n  return /^([pP]\\d)\\s*[:.]?/;\n}\n\nexport function findPn(text: string) {\n  const match = text.match(pnRegexp());\n  return match?.[1];\n}\n\nexport function isPnRule(rule: string = \"\"): rule is PnRule {\n  return pnRegexp().test(rule);\n}\n\nexport function isPnRuleMap(map: unknown): map is PnRuleMapWithColor {\n  if (typeof map !== \"object\" || map === null) return false;\n  return [\"p1\", \"p2\", \"p3\"].every((key) => key in map);\n}\n","/**\n * Chrome storage API wrappers with error handling\n */\n\nexport type StorageResult<T> = {\n  success: true;\n  data: T;\n} | {\n  success: false;\n  error: Error;\n};\n\n/**\n * Saves data to Chrome local storage\n */\nexport function saveToChromeLocalStorage(map: Record<string, unknown>): Promise<StorageResult<void>> {\n  return new Promise((resolve) => {\n    try {\n      chrome.storage.local.set(map, () => {\n        if (chrome.runtime.lastError) {\n          resolve({\n            success: false,\n            error: new Error(chrome.runtime.lastError.message),\n          });\n        } else {\n          resolve({ success: true, data: undefined });\n        }\n      });\n    } catch (error) {\n      resolve({\n        success: false,\n        error: error instanceof Error ? error : new Error(String(error)),\n      });\n    }\n  });\n}\n\n/**\n * Gets all data from Chrome local storage\n */\nexport function getAllFromChromeLocalStorage(): Promise<Record<string, unknown>> {\n  return new Promise((resolve, reject) => {\n    try {\n      chrome.storage.local.get((data) => {\n        if (chrome.runtime.lastError) {\n          reject(new Error(chrome.runtime.lastError.message));\n        } else {\n          resolve(data);\n        }\n      });\n    } catch (error) {\n      reject(error instanceof Error ? error : new Error(String(error)));\n    }\n  });\n}\n\n/**\n * Subscribes to Chrome storage changes\n * Returns an unsubscribe function\n */\nexport function subscribeToChromeStorage(\n  callback: (changes: { [k: string]: chrome.storage.StorageChange }) => void\n): () => void {\n  chrome.storage.onChanged.addListener(callback);\n  return () => {\n    chrome.storage.onChanged.removeListener(callback);\n  };\n}\n"],"mappings":";AAaO,SAAS,cAAc,IAAsC;AAClE,SAAO,GAAG,EAAE,YAAY,kBAAkB;AAC5C;AAEO,SAAS,gBAAgB,IAAwC;AACtE,SAAO,GAAG,EAAE,cAAc,kBAAkB;AAC9C;AAEO,SAAS,kBAAkB,IAAgC;AAChE,SAAO,GAAG,kBAAkB;AAC9B;AAEA,SAAS,WAAW;AAClB,SAAO;AACT;AAEO,SAAS,OAAO,MAAc;AACnC,QAAM,QAAQ,KAAK,MAAM,SAAS,CAAC;AACnC,SAAO,QAAQ,CAAC;AAClB;AAEO,SAAS,SAAS,OAAe,IAAoB;AAC1D,SAAO,SAAS,EAAE,KAAK,IAAI;AAC7B;AAEO,SAAS,YAAY,KAAyC;AACnE,MAAI,OAAO,QAAQ,YAAY,QAAQ,KAAM,QAAO;AACpD,SAAO,CAAC,MAAM,MAAM,IAAI,EAAE,MAAM,CAAC,QAAQ,OAAO,GAAG;AACrD;;;AC1BO,SAAS,yBAAyB,KAA4D;AACnG,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,QAAI;AACF,aAAO,QAAQ,MAAM,IAAI,KAAK,MAAM;AAClC,YAAI,OAAO,QAAQ,WAAW;AAC5B,kBAAQ;AAAA,YACN,SAAS;AAAA,YACT,OAAO,IAAI,MAAM,OAAO,QAAQ,UAAU,OAAO;AAAA,UACnD,CAAC;AAAA,QACH,OAAO;AACL,kBAAQ,EAAE,SAAS,MAAM,MAAM,OAAU,CAAC;AAAA,QAC5C;AAAA,MACF,CAAC;AAAA,IACH,SAAS,OAAO;AACd,cAAQ;AAAA,QACN,SAAS;AAAA,QACT,OAAO,iBAAiB,QAAQ,QAAQ,IAAI,MAAM,OAAO,KAAK,CAAC;AAAA,MACjE,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;AAKO,SAAS,+BAAiE;AAC/E,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI;AACF,aAAO,QAAQ,MAAM,IAAI,CAAC,SAAS;AACjC,YAAI,OAAO,QAAQ,WAAW;AAC5B,iBAAO,IAAI,MAAM,OAAO,QAAQ,UAAU,OAAO,CAAC;AAAA,QACpD,OAAO;AACL,kBAAQ,IAAI;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH,SAAS,OAAO;AACd,aAAO,iBAAiB,QAAQ,QAAQ,IAAI,MAAM,OAAO,KAAK,CAAC,CAAC;AAAA,IAClE;AAAA,EACF,CAAC;AACH;AAMO,SAAS,yBACd,UACY;AACZ,SAAO,QAAQ,UAAU,YAAY,QAAQ;AAC7C,SAAO,MAAM;AACX,WAAO,QAAQ,UAAU,eAAe,QAAQ;AAAA,EAClD;AACF;","names":[]}