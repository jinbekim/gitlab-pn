{"version":3,"sources":["../../src/features/popup/index.ts"],"sourcesContent":["import { getAllFromChromeLocalStorage, saveToChromeLocalStorage } from \"@utils/chrome\";\nimport { getReplacementKey, getBgColorKey, getTextColorKey, isPnRuleMap, PnRule } from \"@domain/pn\";\n\nconst form = document.querySelector(\"form\");\nconst bgColorInputs = document.querySelectorAll(\"[name$='-bg-color']\");\nconst textColorInputs = document.querySelectorAll(\"[name$='-text-color']\");\n\nfunction getValues(): void {\n  getAllFromChromeLocalStorage().then((data) => {\n    if (!isPnRuleMap(data)) return;\n\n    Object.keys(data).forEach((key) => {\n      const input = document.querySelector(`[name='${key}']`);\n      const pn = key as PnRule;\n      if (input instanceof HTMLInputElement) {\n        input.value = data[getReplacementKey(pn)] as string || pn;\n        input.style.backgroundColor = data[getBgColorKey(pn)] as string || \"transparent\";\n        input.style.color = data[getTextColorKey(pn)] as string || \"black\";\n      }\n    });\n  });\n}\n\nfunction init(): void {\n  bgColorInputs.forEach((input) => {\n    input.addEventListener(\"input\", (e) => {\n      const target = e.target as HTMLInputElement;\n      const name = target.name;\n      const textInput = document.querySelector(\n        `[name='${name.replace(\"-bg-color\", \"\")}']`\n      ) as HTMLInputElement;\n      textInput.style.backgroundColor = target.value;\n    });\n  });\n\n  textColorInputs.forEach((input) => {\n    input.addEventListener(\"input\", (e) => {\n      const target = e.target as HTMLInputElement;\n      const name = target.name;\n      const textInput = document.querySelector(\n        `[name='${name.replace(\"-text-color\", \"\")}']`\n      ) as HTMLInputElement;\n      textInput.style.color = target.value;\n    });\n  });\n\n  form?.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    const formData = new FormData(form);\n    const map: Record<string, FormDataEntryValue> = {};\n\n    formData.forEach((value, key) => {\n      map[key] = value;\n    });\n\n    saveToChromeLocalStorage(map);\n\n    window.close();\n  });\n}\n\ngetValues();\ninit();\n"],"mappings":";;;;;;;;;;AAGA,IAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,IAAM,gBAAgB,SAAS,iBAAiB,qBAAqB;AACrE,IAAM,kBAAkB,SAAS,iBAAiB,uBAAuB;AAEzE,SAAS,YAAkB;AACzB,+BAA6B,EAAE,KAAK,CAAC,SAAS;AAC5C,QAAI,CAAC,YAAY,IAAI,EAAG;AAExB,WAAO,KAAK,IAAI,EAAE,QAAQ,CAAC,QAAQ;AACjC,YAAM,QAAQ,SAAS,cAAc,UAAU,GAAG,IAAI;AACtD,YAAM,KAAK;AACX,UAAI,iBAAiB,kBAAkB;AACrC,cAAM,QAAQ,KAAK,kBAAkB,EAAE,CAAC,KAAe;AACvD,cAAM,MAAM,kBAAkB,KAAK,cAAc,EAAE,CAAC,KAAe;AACnE,cAAM,MAAM,QAAQ,KAAK,gBAAgB,EAAE,CAAC,KAAe;AAAA,MAC7D;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;AAEA,SAAS,OAAa;AACpB,gBAAc,QAAQ,CAAC,UAAU;AAC/B,UAAM,iBAAiB,SAAS,CAAC,MAAM;AACrC,YAAM,SAAS,EAAE;AACjB,YAAM,OAAO,OAAO;AACpB,YAAM,YAAY,SAAS;AAAA,QACzB,UAAU,KAAK,QAAQ,aAAa,EAAE,CAAC;AAAA,MACzC;AACA,gBAAU,MAAM,kBAAkB,OAAO;AAAA,IAC3C,CAAC;AAAA,EACH,CAAC;AAED,kBAAgB,QAAQ,CAAC,UAAU;AACjC,UAAM,iBAAiB,SAAS,CAAC,MAAM;AACrC,YAAM,SAAS,EAAE;AACjB,YAAM,OAAO,OAAO;AACpB,YAAM,YAAY,SAAS;AAAA,QACzB,UAAU,KAAK,QAAQ,eAAe,EAAE,CAAC;AAAA,MAC3C;AACA,gBAAU,MAAM,QAAQ,OAAO;AAAA,IACjC,CAAC;AAAA,EACH,CAAC;AAED,QAAM,iBAAiB,UAAU,CAAC,MAAM;AACtC,MAAE,eAAe;AACjB,UAAM,WAAW,IAAI,SAAS,IAAI;AAClC,UAAM,MAA0C,CAAC;AAEjD,aAAS,QAAQ,CAAC,OAAO,QAAQ;AAC/B,UAAI,GAAG,IAAI;AAAA,IACb,CAAC;AAED,6BAAyB,GAAG;AAE5B,WAAO,MAAM;AAAA,EACf,CAAC;AACH;AAEA,UAAU;AACV,KAAK;","names":[]}